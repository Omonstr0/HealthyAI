{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  {% for category, message in messages %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">{{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}


    <h2 class="text-center mb-4">üë®‚Äç‚öïÔ∏è √Ä propos de moi</h2>

    <form method="POST">
        <div class="mb-3">
            <label for="age" class="form-label">√Çge</label>
            {% if edit_mode %}
                <input type="number" class="form-control" name="age" value="{{ profile.age or '' }}" required>
            {% else %}
                <p>{{ profile.age or 'Non renseign√©' }}</p>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="height" class="form-label">Taille (en cm)</label>
            {% if edit_mode %}
                <input type="number" class="form-control" name="height" value="{{ profile.height or '' }}" required>
            {% else %}
                <p>{{ profile.height or 'Non renseign√©e' }}</p>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="weight" class="form-label">Poids (en kg)</label>
            {% if edit_mode %}
                <input type="number" class="form-control" name="weight" value="{{ profile.weight or '' }}" required>
            {% else %}
                <p>{{ profile.weight or 'Non renseign√©' }}</p>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="sex" class="form-label">Sexe</label>
            {% if edit_mode %}
                <select class="form-select" name="sex" required>
                    <option value="male" {% if profile.sex == 'male' %}selected{% endif %}>Homme</option>
                    <option value="female" {% if profile.sex == 'female' %}selected{% endif %}>Femme</option>
                </select>
            {% else %}
                <p>{{ 'Homme' if profile.sex == 'male' else 'Femme' if profile.sex == 'female' else 'Non renseign√©' }}</p>
            {% endif %}
        </div>

        <div class="mb-4">
            <label for="activity" class="form-label">Niveau d'activit√© physique</label>
            {% if edit_mode %}
                <select class="form-select" name="activity" required>
                    <option value="1.2" {% if profile.activity == 1.2 %}selected{% endif %}>Peu ou pas d'activit√© physique</option>
                    <option value="1.375" {% if profile.activity == 1.375 %}selected{% endif %}>Activit√© l√©g√®re</option>
                    <option value="1.55" {% if profile.activity == 1.55 %}selected{% endif %}>Activit√© mod√©r√©e</option>
                    <option value="1.725" {% if profile.activity == 1.725 %}selected{% endif %}>Activit√© intense</option>
                    <option value="1.9" {% if profile.activity == 1.9 %}selected{% endif %}>Activit√© tr√®s intense</option>
                </select>
            {% else %}
                <p>
                    {% if profile.activity == 1.2 %}Peu ou pas d'activit√© physique
                    {% elif profile.activity == 1.375 %}Activit√© l√©g√®re
                    {% elif profile.activity == 1.55 %}Activit√© mod√©r√©e
                    {% elif profile.activity == 1.725 %}Activit√© intense
                    {% elif profile.activity == 1.9 %}Activit√© tr√®s intense
                    {% else %}Non renseign√©{% endif %}
                </p>
            {% endif %}
        </div>

        <div class="d-flex gap-3">
            {% if edit_mode %}
                <button type="submit" class="btn btn-success">üíæ Enregistrer</button>
                <a href="{{ url_for('calorie') }}" class="btn btn-secondary">Annuler</a>
            {% else %}
                <a href="{{ url_for('calorie', edit=1) }}" class="btn btn-outline-primary">‚úèÔ∏è Modifier</a>
            {% endif %}
            <button type="submit" class="btn btn-success">Calculer</button>
        </div>
    </form>

  {% if calories and protein_low and protein_high %}
    <div class="d-flex justify-content-center mt-5">
      <div class="card shadow-sm p-4" style="background-color: #f9f9f9; border-radius: 12px; max-width: 600px;">
        <h4 class="mb-3 text-center">üìä Besoins journaliers estim√©s :</h4>
        <p class="mb-2 text-center"><strong>Calories :</strong> {{ calories }} kcal</p>
        <p class="mb-0 text-center"><strong>Prot√©ines :</strong> entre {{ protein_low }} g et {{ protein_high }} g / jour</p>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
